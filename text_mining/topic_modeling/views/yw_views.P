

%---------------------------------------------------------------------------------------------------
% FACT: yw_source_file(SourceId, SourceFile).
%...................................................................................................
yw_source_file(1,'./script/topic_modeling.py').


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_script(WorkflowId, WorkflowName, SourceId, SourceFile).
%...................................................................................................
yw_workflow_script(1,topic_modeling,1,'./script/topic_modeling.py').


%---------------------------------------------------------------------------------------------------
% FACT: yw_program(WorkflowId, ProgramName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_program(1,topic_modeling,nil,1,1,94).
yw_program(2,'AccessText',1,1,11,16).
yw_program(3,'PreprocessFile',1,1,18,32).
yw_program(4,'LDA',1,1,34,92).
yw_program(5,tf_calculation,4,1,45,52).
yw_program(6,'LatentDirichletAllocation',4,1,54,75).
yw_program(7,print_top_words,4,1,77,90).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow(WorkflowId, WorkflowName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow(1,topic_modeling,nil,1,1,94).
yw_workflow(4,'LDA',1,1,34,92).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_step(StepId, StepName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow_step(2,'AccessText',1,1,11,16).
yw_workflow_step(3,'PreprocessFile',1,1,18,32).
yw_workflow_step(4,'LDA',1,1,34,92).
yw_workflow_step(5,tf_calculation,4,1,45,52).
yw_workflow_step(6,'LatentDirichletAllocation',4,1,54,75).
yw_workflow_step(7,print_top_words,4,1,77,90).


%---------------------------------------------------------------------------------------------------
% FACT: yw_function(FunctionId, FunctionName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................


%---------------------------------------------------------------------------------------------------
% FACT: yw_data(DataId, DataName, WorkflowId, WorkflowName).
%...................................................................................................
yw_data(1,'Static_text',nil,nil).
yw_data(2,'Topicmodeling_Result',nil,nil).
yw_data(3,'Static_text',1,topic_modeling).
yw_data(4,'TextRead',1,topic_modeling).
yw_data(5,stopwords,1,topic_modeling).
yw_data(6,regular_expression,1,topic_modeling).
yw_data(7,'FileProcess',1,topic_modeling).
yw_data(8,n_components,1,topic_modeling).
yw_data(9,n_top_words,1,topic_modeling).
yw_data(10,random_state,1,topic_modeling).
yw_data(11,max_iter,1,topic_modeling).
yw_data(12,learning_method,1,topic_modeling).
yw_data(13,learning_offset,1,topic_modeling).
yw_data(14,'Topicmodeling_Result',1,topic_modeling).
yw_data(15,file_valid,4,'LDA').
yw_data(16,term_frequency,4,'LDA').
yw_data(17,term_frequency_vectorizer,4,'LDA').
yw_data(18,n_components,4,'LDA').
yw_data(19,max_iter,4,'LDA').
yw_data(20,learning_method,4,'LDA').
yw_data(21,learning_offset,4,'LDA').
yw_data(22,random_state,4,'LDA').
yw_data(23,'LDA_model',4,'LDA').
yw_data(24,'TermFrequency_feature_names',4,'LDA').
yw_data(25,'Topicmodeling_Result',4,'LDA').
yw_data(26,n_top_words,4,'LDA').


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_input(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_input(7,print_top_words,param,32,n_top_words,26,n_top_words).
yw_step_input(7,print_top_words,in,31,tf_feature_names,24,'TermFrequency_feature_names').
yw_step_input(7,print_top_words,in,30,lda,23,'LDA_model').
yw_step_input(6,'LatentDirichletAllocation',param,22,tf_vectorizer,17,term_frequency_vectorizer).
yw_step_input(6,'LatentDirichletAllocation',param,21,tf,16,term_frequency).
yw_step_input(6,'LatentDirichletAllocation',param,20,n_components,18,n_components).
yw_step_input(6,'LatentDirichletAllocation',in,26,random_state,22,random_state).
yw_step_input(6,'LatentDirichletAllocation',in,25,learning_offset,21,learning_offset).
yw_step_input(6,'LatentDirichletAllocation',in,24,learning_method,20,learning_method).
yw_step_input(6,'LatentDirichletAllocation',in,23,max_iter,19,max_iter).
yw_step_input(5,tf_calculation,in,17,file_valid,15,file_valid).
yw_step_input(4,'LDA',param,11,n_top_words,9,n_top_words).
yw_step_input(4,'LDA',param,10,n_components,8,n_components).
yw_step_input(4,'LDA',in,15,learning_offset,13,learning_offset).
yw_step_input(4,'LDA',in,14,learning_method,12,learning_method).
yw_step_input(4,'LDA',in,13,max_iter,11,max_iter).
yw_step_input(4,'LDA',in,12,random_state,10,random_state).
yw_step_input(4,'LDA',in,9,'FileProcess',7,'FileProcess').
yw_step_input(3,'PreprocessFile',in,7,'TextRead',4,'TextRead').
yw_step_input(3,'PreprocessFile',in,6,regexr,6,regular_expression).
yw_step_input(3,'PreprocessFile',in,5,stopwords,5,stopwords).
yw_step_input(2,'AccessText',in,3,text_data_path,3,'Static_text').
yw_step_input(1,topic_modeling,in,1,'Static_text',1,'Static_text').


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_output(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_output(1,topic_modeling,out,2,'Topicmodeling_Result',2,'Topicmodeling_Result').
yw_step_output(2,'AccessText',out,4,text_file,4,'TextRead').
yw_step_output(3,'PreprocessFile',out,8,'Valid_file',7,'FileProcess').
yw_step_output(4,'LDA',out,16,'Topicmodeling_Result',14,'Topicmodeling_Result').
yw_step_output(5,tf_calculation,out,18,tf,16,term_frequency).
yw_step_output(5,tf_calculation,out,19,tf_vectorizer,17,term_frequency_vectorizer).
yw_step_output(6,'LatentDirichletAllocation',out,27,lda,23,'LDA_model').
yw_step_output(6,'LatentDirichletAllocation',out,28,tf_feature_names,24,'TermFrequency_feature_names').
yw_step_output(6,'LatentDirichletAllocation',out,29,'Topicmodeling_Result',25,'Topicmodeling_Result').
yw_step_output(7,print_top_words,out,33,'Topicmodeling_Result',25,'Topicmodeling_Result').


%---------------------------------------------------------------------------------------------------
% FACT: yw_inflow(WorkflowId, WorkflowName, DataId, DataName, ProgramId, ProgramName).
%...................................................................................................
yw_inflow(4,'LDA',26,n_top_words,7,print_top_words).
yw_inflow(4,'LDA',18,n_components,6,'LatentDirichletAllocation').
yw_inflow(4,'LDA',22,random_state,6,'LatentDirichletAllocation').
yw_inflow(4,'LDA',21,learning_offset,6,'LatentDirichletAllocation').
yw_inflow(4,'LDA',20,learning_method,6,'LatentDirichletAllocation').
yw_inflow(4,'LDA',19,max_iter,6,'LatentDirichletAllocation').
yw_inflow(1,topic_modeling,3,'Static_text',2,'AccessText').


%---------------------------------------------------------------------------------------------------
% FACT: yw_flow(SourceProgramId, SourceProgramName, SourcePortId, SourcePortName, DataId, DataName, SinkPortId, SinkPortName, SinkProgramId, SinkProgramName).
%...................................................................................................
yw_flow(2,'AccessText',4,text_file,4,'TextRead',7,'TextRead',3,'PreprocessFile').
yw_flow(3,'PreprocessFile',8,'Valid_file',7,'FileProcess',9,'FileProcess',4,'LDA').
yw_flow(5,tf_calculation,18,tf,16,term_frequency,21,tf,6,'LatentDirichletAllocation').
yw_flow(5,tf_calculation,19,tf_vectorizer,17,term_frequency_vectorizer,22,tf_vectorizer,6,'LatentDirichletAllocation').
yw_flow(6,'LatentDirichletAllocation',27,lda,23,'LDA_model',30,lda,7,print_top_words).
yw_flow(6,'LatentDirichletAllocation',28,tf_feature_names,24,'TermFrequency_feature_names',31,tf_feature_names,7,print_top_words).


%---------------------------------------------------------------------------------------------------
% FACT: yw_outflow(StepId, StepName, StepOutDataId, StepOutDataName, WorkflowId, WorkflowName, WorkflowOutDataId, WorkflowOutDataName).
%...................................................................................................
yw_outflow(4,'LDA',14,'Topicmodeling_Result',1,topic_modeling,2,'Topicmodeling_Result').
yw_outflow(6,'LatentDirichletAllocation',25,'Topicmodeling_Result',4,'LDA',14,'Topicmodeling_Result').
yw_outflow(7,print_top_words,25,'Topicmodeling_Result',4,'LDA',14,'Topicmodeling_Result').


%---------------------------------------------------------------------------------------------------
% FACT: yw_qualified_name(EntityType, Id, QualifiedName).
%...................................................................................................
yw_qualified_name(program,1,topic_modeling).
yw_qualified_name(program,2,'topic_modeling.AccessText').
yw_qualified_name(program,3,'topic_modeling.PreprocessFile').
yw_qualified_name(program,4,'topic_modeling.LDA').
yw_qualified_name(program,5,'topic_modeling.LDA.tf_calculation').
yw_qualified_name(program,6,'topic_modeling.LDA.LatentDirichletAllocation').
yw_qualified_name(program,7,'topic_modeling.LDA.print_top_words').
yw_qualified_name(port,1,'topic_modeling<-Static_text').
yw_qualified_name(port,2,'topic_modeling->Topicmodeling_Result').
yw_qualified_name(port,3,'topic_modeling.AccessText<-text_data_path').
yw_qualified_name(port,4,'topic_modeling.AccessText->text_file').
yw_qualified_name(port,5,'topic_modeling.PreprocessFile<-stopwords').
yw_qualified_name(port,6,'topic_modeling.PreprocessFile<-regexr').
yw_qualified_name(port,7,'topic_modeling.PreprocessFile<-TextRead').
yw_qualified_name(port,8,'topic_modeling.PreprocessFile->Valid_file').
yw_qualified_name(port,9,'topic_modeling.LDA<-FileProcess').
yw_qualified_name(port,10,'topic_modeling.LDA<-n_components').
yw_qualified_name(port,11,'topic_modeling.LDA<-n_top_words').
yw_qualified_name(port,12,'topic_modeling.LDA<-random_state').
yw_qualified_name(port,13,'topic_modeling.LDA<-max_iter').
yw_qualified_name(port,14,'topic_modeling.LDA<-learning_method').
yw_qualified_name(port,15,'topic_modeling.LDA<-learning_offset').
yw_qualified_name(port,16,'topic_modeling.LDA->Topicmodeling_Result').
yw_qualified_name(port,17,'topic_modeling.LDA.tf_calculation<-file_valid').
yw_qualified_name(port,18,'topic_modeling.LDA.tf_calculation->tf').
yw_qualified_name(port,19,'topic_modeling.LDA.tf_calculation->tf_vectorizer').
yw_qualified_name(port,20,'topic_modeling.LDA.LatentDirichletAllocation<-n_components').
yw_qualified_name(port,21,'topic_modeling.LDA.LatentDirichletAllocation<-tf').
yw_qualified_name(port,22,'topic_modeling.LDA.LatentDirichletAllocation<-tf_vectorizer').
yw_qualified_name(port,23,'topic_modeling.LDA.LatentDirichletAllocation<-max_iter').
yw_qualified_name(port,24,'topic_modeling.LDA.LatentDirichletAllocation<-learning_method').
yw_qualified_name(port,25,'topic_modeling.LDA.LatentDirichletAllocation<-learning_offset').
yw_qualified_name(port,26,'topic_modeling.LDA.LatentDirichletAllocation<-random_state').
yw_qualified_name(port,27,'topic_modeling.LDA.LatentDirichletAllocation->lda').
yw_qualified_name(port,28,'topic_modeling.LDA.LatentDirichletAllocation->tf_feature_names').
yw_qualified_name(port,29,'topic_modeling.LDA.LatentDirichletAllocation->Topicmodeling_Result').
yw_qualified_name(port,30,'topic_modeling.LDA.print_top_words<-lda').
yw_qualified_name(port,31,'topic_modeling.LDA.print_top_words<-tf_feature_names').
yw_qualified_name(port,32,'topic_modeling.LDA.print_top_words<-n_top_words').
yw_qualified_name(port,33,'topic_modeling.LDA.print_top_words->Topicmodeling_Result').
yw_qualified_name(data,1,'[Static_text]').
yw_qualified_name(data,2,'[Topicmodeling_Result]').
yw_qualified_name(data,3,'topic_modeling[Static_text]').
yw_qualified_name(data,4,'topic_modeling[TextRead]').
yw_qualified_name(data,5,'topic_modeling[stopwords]').
yw_qualified_name(data,6,'topic_modeling[regular_expression]').
yw_qualified_name(data,7,'topic_modeling[FileProcess]').
yw_qualified_name(data,8,'topic_modeling[n_components]').
yw_qualified_name(data,9,'topic_modeling[n_top_words]').
yw_qualified_name(data,10,'topic_modeling[random_state]').
yw_qualified_name(data,11,'topic_modeling[max_iter]').
yw_qualified_name(data,12,'topic_modeling[learning_method]').
yw_qualified_name(data,13,'topic_modeling[learning_offset]').
yw_qualified_name(data,14,'topic_modeling[Topicmodeling_Result]').
yw_qualified_name(data,15,'topic_modeling.LDA[file_valid]').
yw_qualified_name(data,16,'topic_modeling.LDA[term_frequency]').
yw_qualified_name(data,17,'topic_modeling.LDA[term_frequency_vectorizer]').
yw_qualified_name(data,18,'topic_modeling.LDA[n_components]').
yw_qualified_name(data,19,'topic_modeling.LDA[max_iter]').
yw_qualified_name(data,20,'topic_modeling.LDA[learning_method]').
yw_qualified_name(data,21,'topic_modeling.LDA[learning_offset]').
yw_qualified_name(data,22,'topic_modeling.LDA[random_state]').
yw_qualified_name(data,23,'topic_modeling.LDA[LDA_model]').
yw_qualified_name(data,24,'topic_modeling.LDA[TermFrequency_feature_names]').
yw_qualified_name(data,25,'topic_modeling.LDA[Topicmodeling_Result]').
yw_qualified_name(data,26,'topic_modeling.LDA[n_top_words]').


%---------------------------------------------------------------------------------------------------
% FACT: yw_description(EntityType, Id, Name, Description)).
%...................................................................................................
yw_description(program,1,topic_modeling,'Exercise YW for Analysing Text with NLTk').
yw_description(program,2,'AccessText','To read the text data from book1.txt file').
yw_description(program,3,'PreprocessFile','To preprocess the text data').
yw_description(program,5,tf_calculation,'using CountVectorizer from sklearn library to calculate the term frequency').
yw_description(program,6,'LatentDirichletAllocation','using the sciki-learn library to do LDA modeling').
yw_description(program,7,print_top_words,'print the topics with top words').
yw_description(port,2,'Topicmodeling_Result','log file which contains the topics').
yw_description(port,3,text_data_path,'Text file which contains static text data').
yw_description(port,8,'Valid_file','valid file after data preprocessing').
yw_description(port,9,'FileProcess','file after pre_process procedure').
yw_description(port,16,'Topicmodeling_Result','log file which contains the topics').
yw_description(port,17,file_valid,'file after pre_process').
yw_description(port,23,max_iter,'the maximum number of iterations').
yw_description(port,24,learning_method,'method used to update _component, only used in fit method').
yw_description(port,25,learning_offset,'a parameter that down weights early iterations in online learning').
yw_description(port,26,random_state,'random number generator').
yw_description(port,30,lda,'LDA model').
